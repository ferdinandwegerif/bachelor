<html>

<head>
    <title>Vugu Form</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
    /* <style>
        label{
            font-weight: bold;
        }
        #main{
            width: 30%;
            margin: 40px auto 40px auto;
        }
        h4{
            margin-bottom: 40px;
            text-align: center;
        }
    </style> */
</head>
    <body>
        <div class="container" id="main">
            <h4 class="display-4">Registration with Vugu</h1>

                <form action="" method="POST">

                    <!-- First name and last name -->
                    <div class="row">
                        <div class="col">
                            <div class="form-group">
                                <label for="firstname">First Name</label>
                                <vgform:Input type="text" placeholder="First Name" class="form-control" id="firstname"
                                    :Value='vgform.StringPtr{&c.firstname}'></vgform:Input>
                            </div>
                        </div>
                        <div class="col">
                            <div class="form-group">
                                <label for="lastname">Last Name</label>
                                <vgform:Input type="text" placeholder="Last Name" class="form-control" id="lastname"
                                :Value='vgform.StringPtr{&c.lastname}'></vgform:Input>
                            </div>
                        </div>
                    </div>

                    <!-- Username -->
                    <div class="form-group">
                        <label for="">Username</label>
                        <vgform:Input type="text" placeholder="Username" class="form-control"
                            :Value='vgform.StringPtr{&c.username}'></vgform:Input>
                    </div>

                    <!-- Password -->
                    <div class="form-group">
                        <label for="">Password</label>
                        <vgform:Input type="password" placeholder="Password" class="form-control"
                            :Value='vgform.StringPtr{&c.password}'></vgform:Input>
                    </div>

                    <!-- Email -->
                    <div class="form-group">
                        <label for="">E-mail</label>
                        <vgform:Input type="text" placeholder="E-mail" class="form-control"
                            :Value='vgform.StringPtr{&c.email}'></vgform:Input>
                    </div>

                    <!-- Gender -->
                    <div class="form-group">
                        <label for="">Gender</label><br>

                        <vgform:Select name="gender" id="gender" class="form-control"
                            :Value='vgform.StringPtrDefault(&c.gender,"Male")'
                            :Options='vgform.SliceOptions{"Male","Female"}.Title()'>
                        </vgform:Select>
                    </div>

                    <div class="field form-group">
                        <button @click="c.HandleSubmit(event)">Submit</button>
                    </div>

                </form>

            <div id="values">
                <h3>Current values</h3>
                <div>First Name: {{ firstname }}</div>
                <div>Last Name: {{ lastname }}</div>
                <div>Username: {{ username }}</div>
                <div>Password: {{ password }}</div>
                <div>E-mail: {{ email }}</div>
                <div>Gender: {{ gender }}</div>
            </div>

            <div id="errors" vg-for="_,error := range(c.errors)">
                <p>Please correct errors below.</p>
                <ul>
                    <li>{{ error }}</li>
                </ul>
            </div>
        </div>
    </body>
</html>

<script type="application/x-go">

import (
    "log"
    "github.com/vugu/vugu/vgform"
)
type Root struct {
    firstname string
    lastname string
    username string
    password string
    email string
    gender string
    errors []string
    success bool
}

func (c *Root) HandleSubmit(event vugu.DOMEvent) {
    c.errors = []
    c.success = false

    if(c.firstname == nil){
        append(c.errors, "Requires First Name.")
    }
    if(c.lastname == nil){
        append(c.errors, "Requires Last Name.")
    }
    if(c.username == nil){
        append(c.errors, "Requires Username.")
    }
    if(c.password == nil){
        append(c.errors, "Requires Password.")
    }
    if(c.email == nil){
        append(c.errors, "Requires E-Mail.")
    }
    if(c.gender == nil){
        append(c.errors, "Require gender.")
    }
    if (len(c.errors) == 0){
        c.success = true
    }
}

</script>